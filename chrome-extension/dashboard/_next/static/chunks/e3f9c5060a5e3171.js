(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65049,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(3736);function r(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function n(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-header",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function l(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("leading-none font-semibold",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-title",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function i(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("text-muted-foreground text-sm",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-description",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function o(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-action",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function d(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("px-6",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-content",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function c(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"card-footer",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}e.s(["Card",()=>r,"CardAction",()=>o,"CardContent",()=>d,"CardDescription",()=>i,"CardFooter",()=>c,"CardHeader",()=>n,"CardTitle",()=>l])},4461,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(30300),r=e.i(17008),n=e.i(3736);let l=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i(e){let r,i,o,d,c,m,u=(0,s.c)(12);u[0]!==e?({className:r,variant:d,asChild:o,...i}=e,u[0]=e,u[1]=r,u[2]=i,u[3]=o,u[4]=d):(r=u[1],i=u[2],o=u[3],d=u[4]);let h=void 0!==o&&o?a.Slot.Slot:"span";return u[5]!==r||u[6]!==d?(c=(0,n.cn)(l({variant:d}),r),u[5]=r,u[6]=d,u[7]=c):c=u[7],u[8]!==h||u[9]!==i||u[10]!==c?(m=(0,t.jsx)(h,{"data-slot":"badge",className:c,...i}),u[8]=h,u[9]=i,u[10]=c,u[11]=m):m=u[11],m}e.s(["Badge",()=>i])},115,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(3736);function r(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("w-full caption-bottom text-sm",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:l,...n})}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function n(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("[&_tr]:border-b",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("thead",{"data-slot":"table-header",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function l(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("[&_tr:last-child]:border-0",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("tbody",{"data-slot":"table-body",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function i(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("tr",{"data-slot":"table-row",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function o(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("th",{"data-slot":"table-head",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}function d(e){let r,n,l,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...n}=e,o[0]=e,o[1]=r,o[2]=n):(r=o[1],n=o[2]),o[3]!==r?(l=(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),o[3]=r,o[4]=l):l=o[4],o[5]!==n||o[6]!==l?(i=(0,t.jsx)("td",{"data-slot":"table-cell",className:l,...n}),o[5]=n,o[6]=l,o[7]=i):i=o[7],i}e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>n,"TableRow",()=>i])},13090,e=>{"use strict";let t=(0,e.i(64192).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},69716,e=>{"use strict";var t=e.i(13090);e.s(["RefreshCwIcon",()=>t.default])},74596,e=>{"use strict";let t=(0,e.i(64192).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDownIcon",()=>t],74596)},26603,e=>{"use strict";let t=(0,e.i(64192).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["default",()=>t])},15941,e=>{"use strict";var t=e.i(45976),s=e.i(4461),a=e.i(99570),r=e.i(65049),n=e.i(115);let l=(0,e.i(64192).default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var i=e.i(69716),o=e.i(74596),d=e.i(31834),c=e.i(26603),c=c,m=e.i(72469);function u(){let[e,u]=(0,m.useState)([]),[h,x]=(0,m.useState)([]),[b,f]=(0,m.useState)(!0),[g,p]=(0,m.useState)(new Set);(0,m.useEffect)(()=>{document.title="Controls - ContextFort"},[]);let j=async()=>{f(!0);try{if("undefined"!=typeof chrome&&chrome?.storage){let e=await chrome.storage.local.get(["screenshots","sessions"]),t=e.screenshots||[],s=(e.sessions||[]).reduce((e,t)=>(e.find(e=>e.id===t.id)||e.push(t),e),[]);u(t),x(s)}}catch(e){console.error("[Controls Page] Error loading data:",e)}f(!1)};(0,m.useEffect)(()=>{j();let e=setInterval(j,3e3);return()=>clearInterval(e)},[]);let v=e=>`${new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} ${new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}`,w=new Map;e.forEach(e=>{let t=e.sessionId;t&&(w.has(t)||w.set(t,[]),w.get(t).push(e))});let N=new Map;w.forEach((e,t)=>{let s=h.find(e=>e.id===t);if(!s)return;let a=e.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());for(let e=0;e<a.length-1;e++){let r=a[e].url,n=a[e+1].url;if(r===n)continue;let l=`${r}|||${n}`;try{let i=new URL(r).hostname,o=new URL(n).hostname;N.has(l)||N.set(l,{fromUrl:r,toUrl:n,fromHostname:i,toHostname:o,transitionCount:0,sessions:new Map});let d=N.get(l);d.sessions.has(t)||d.sessions.set(t,{sessionId:t,sessionTitle:s.tabTitle||"Unknown Page",sessionStatus:s.status,sessionStartTime:s.startTime,transitionCount:0,firstTransition:a[e].timestamp,lastTransition:a[e+1].timestamp});let c=d.sessions.get(t);d.transitionCount++,c.transitionCount++,c.lastTransition=a[e+1].timestamp}catch(e){console.error("[URL Logs] Error processing transition:",e)}}});let T=Array.from(N.values()).sort((e,t)=>t.transitionCount-e.transitionCount);return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Controls"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track URL navigation patterns and transitions across sessions"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:j,children:[(0,t.jsx)(i.RefreshCwIcon,{className:"mr-2 h-4 w-4"}),"Refresh"]})})]}),b?(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)(i.RefreshCwIcon,{className:"mr-2 h-5 w-5 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading URL logs..."})]})})}):0===T.length?(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(l,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),(0,t.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"No URL transitions yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Navigation patterns will appear when multiple URLs are visited in a session"})]})})}):(0,t.jsx)("div",{className:"rounded-md border border-border",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"hover:bg-transparent border-b border-border",children:[(0,t.jsx)(n.TableHead,{className:"w-[18%]",children:"From URL"}),(0,t.jsx)(n.TableHead,{className:"w-[18%]",children:"To URL"}),(0,t.jsx)(n.TableHead,{className:"w-[13%]",children:"Navigation Type"}),(0,t.jsx)(n.TableHead,{className:"w-[38%]",children:"Sessions"}),(0,t.jsx)(n.TableHead,{className:"w-[13%] text-center",children:"Actions"})]})}),(0,t.jsx)(n.TableBody,{children:T.map((r,l)=>{let i=r.fromHostname!==r.toHostname,u=`${r.fromUrl}|||${r.toUrl}`,x=g.has(u),b=e.filter(e=>e.url===r.toUrl&&e.sessionId).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),f=Array.from(r.sessions.values()).sort((e,t)=>new Date(t.sessionStartTime).getTime()-new Date(e.sessionStartTime).getTime())[0];return(0,t.jsxs)(m.Fragment,{children:[(0,t.jsxs)(n.TableRow,{className:"border-b border-border",children:[(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"text-sm font-medium",title:r.fromUrl,children:r.fromHostname})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"text-sm font-medium",title:r.toUrl,children:r.toHostname})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(s.Badge,{variant:"outline",className:i?"bg-orange-500/10 text-orange-500 border-orange-500/20":"bg-background",children:i?"Cross-domain":"Same-domain"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2 border border-border rounded-md",children:[(0,t.jsx)(c.default,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"text-sm",children:["Session | Started: ",v(f.sessionStartTime),"active"===f.sessionStatus&&(0,t.jsx)("span",{className:"ml-2 text-xs",children:"(Active)"})]})})]})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{let e;(e=new Set(g)).has(u)?e.delete(u):e.add(u),p(e)},disabled:0===b.length,children:x?(0,t.jsx)(o.ChevronDownIcon,{className:"h-4 w-4"}):(0,t.jsx)(d.ChevronRightIcon,{className:"h-4 w-4"})})})]}),x&&b.length>0&&(0,t.jsx)(n.TableRow,{className:"bg-muted/30 hover:bg-muted/30",children:(0,t.jsx)(n.TableCell,{colSpan:5,className:"p-0",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-b border-border",children:[(0,t.jsx)(n.TableHead,{className:"w-[35%]",children:"Screenshot"}),(0,t.jsx)(n.TableHead,{className:"w-[15%]",children:"Event"}),(0,t.jsx)(n.TableHead,{className:"w-[30%]",children:"URL"}),(0,t.jsx)(n.TableHead,{className:"w-[20%]",children:"Session"})]})}),(0,t.jsx)(n.TableBody,{children:b.map((e,s)=>{let a=h.find(t=>t.id===e.sessionId);return(0,t.jsxs)(n.TableRow,{className:s%2==0?"bg-background":"bg-muted/50",children:[(0,t.jsx)(n.TableCell,{children:e.dataUrl?(0,t.jsx)("img",{src:e.dataUrl,alt:"Screenshot",className:"w-[350px] h-auto rounded-md border border-border cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>window.open(e.dataUrl,"_blank")}):(0,t.jsxs)("div",{className:"w-[350px] h-[200px] flex flex-col items-center justify-center bg-muted border-2 border-dashed border-muted-foreground/50 rounded-md",children:[(0,t.jsx)("span",{className:"text-4xl mb-2",children:"ðŸ“„"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-muted-foreground",children:"Page Read"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground/60 mt-1",children:"No screenshot"})]})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"text-base font-semibold",children:e.eventType||"N/A"})}),(0,t.jsx)(n.TableCell,{className:"break-words",children:(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:e.url})}),(0,t.jsx)(n.TableCell,{className:"break-words",children:(0,t.jsx)("span",{className:"text-sm",children:a?`Session | Started: ${v(a.startTime)}`:"N/A"})})]},e.id)})})]})})})})]},u)})})]})})]})}e.s(["default",()=>u],15941)}]);