(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13859,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(15288),r=e.i(75157),l=e.i(62653),l=l,d=e.i(44575),d=d;function n(e){let n,i,c,o,x,m,h,u,g,p,f,j,N=(0,t.c)(30),{title:v,value:b,change:y,trend:w,icon:k,variant:S,description:C}=e,M=void 0===S?"default":S;return N[0]!==w||N[1]!==M?(o="up"===w?"text-green-600":"text-red-600",i="up"===w?d.default:l.default,n=a.Card,c=(0,r.cn)({default:"",success:"border-green-500/20 bg-green-500/5",error:"border-red-500/20 bg-red-500/5"}[M]),N[0]=w,N[1]=M,N[2]=n,N[3]=i,N[4]=c,N[5]=o):(n=N[2],i=N[3],c=N[4],o=N[5]),N[6]!==v?(x=(0,s.jsx)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:v}),N[6]=v,N[7]=x):x=N[7],N[8]!==k?(m=k&&(0,s.jsx)("div",{className:"text-muted-foreground",children:k}),N[8]=k,N[9]=m):m=N[9],N[10]!==x||N[11]!==m?(h=(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[x,m]}),N[10]=x,N[11]=m,N[12]=h):h=N[12],N[13]!==b?(u=b.toLocaleString(),N[13]=b,N[14]=u):u=N[14],N[15]!==u?(g=(0,s.jsx)("div",{className:"text-2xl font-bold",children:u}),N[15]=u,N[16]=g):g=N[16],N[17]!==i||N[18]!==y||N[19]!==C||N[20]!==o?(p=(void 0!==y||C)&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[void 0!==y&&(0,s.jsxs)("span",{className:(0,r.cn)("flex items-center",o),children:[(0,s.jsx)(i,{className:"mr-1 h-3 w-3"}),Math.abs(y),"%"]}),C&&(0,s.jsx)("span",{children:C})]}),N[17]=i,N[18]=y,N[19]=C,N[20]=o,N[21]=p):p=N[21],N[22]!==g||N[23]!==p?(f=(0,s.jsxs)(a.CardContent,{children:[g,p]}),N[22]=g,N[23]=p,N[24]=f):f=N[24],N[25]!==n||N[26]!==c||N[27]!==h||N[28]!==f?(j=(0,s.jsxs)(n,{className:c,children:[h,f]}),N[25]=n,N[26]=c,N[27]=h,N[28]=f,N[29]=j):j=N[29],j}e.s(["StatCard",()=>n],13859)},63906,e=>{"use strict";let s=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>s])},15288,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(75157);function r(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function l(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-header",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function d(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("leading-none font-semibold",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-title",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function n(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("text-muted-foreground text-sm",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-description",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function i(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-action",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function c(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("px-6",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-content",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}function o(e){let r,l,d,n,i=(0,t.c)(8);return i[0]!==e?({className:r,...l}=e,i[0]=e,i[1]=r,i[2]=l):(r=i[1],l=i[2]),i[3]!==r?(d=(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),i[3]=r,i[4]=d):d=i[4],i[5]!==l||i[6]!==d?(n=(0,s.jsx)("div",{"data-slot":"card-footer",className:d,...l}),i[5]=l,i[6]=d,i[7]=n):n=i[7],n}e.s(["Card",()=>r,"CardAction",()=>i,"CardContent",()=>c,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>l,"CardTitle",()=>d])},62653,44575,e=>{"use strict";var s=e.i(75254);let t=(0,s.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t],62653);let a=(0,s.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>a],44575)},87486,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(86011),r=e.i(25913),l=e.i(75157);let d=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let r,n,i,c,o,x,m=(0,t.c)(12);m[0]!==e?({className:r,variant:c,asChild:i,...n}=e,m[0]=e,m[1]=r,m[2]=n,m[3]=i,m[4]=c):(r=m[1],n=m[2],i=m[3],c=m[4]);let h=void 0!==i&&i?a.Slot.Slot:"span";return m[5]!==r||m[6]!==c?(o=(0,l.cn)(d({variant:c}),r),m[5]=r,m[6]=c,m[7]=o):o=m[7],m[8]!==h||m[9]!==n||m[10]!==o?(x=(0,s.jsx)(h,{"data-slot":"badge",className:o,...n}),m[8]=h,m[9]=n,m[10]=o,m[11]=x):x=m[11],x}e.s(["Badge",()=>n])},79319,e=>{"use strict";var s=e.i(63906);e.s(["RefreshCwIcon",()=>s.default])},91888,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2Icon",()=>s],91888)},14550,e=>{"use strict";var s=e.i(43476),t=e.i(13859),a=e.i(87486),r=e.i(19455),l=e.i(15288),d=e.i(17603),d=d,n=e.i(79319),i=e.i(75254);let c=(0,i.default)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),o=(0,i.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var x=e.i(91888);let m=(0,i.default)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);var h=e.i(9797),u=e.i(71645);function g(){let e;console.log("üöÄ [Screenshots Page] Component loaded! Version: 4.0 - Back to basics");let[i,g]=(0,u.useState)([]),[p,f]=(0,u.useState)([]),[j,N]=(0,u.useState)(!0),[v,b]=(0,u.useState)(1),[y,w]=(0,u.useState)(null),[k,S]=(0,u.useState)(new Set),[C,M]=(0,u.useState)(!0),[T,R]=(0,u.useState)([]),[I,D]=(0,u.useState)(null),[P,q]=(0,u.useState)(0),[E,A]=(0,u.useState)({}),B=async()=>{console.log("üì∏ [Screenshots Page] loadScreenshots() called"),q(e=>e+1),N(!0),D(null);try{if("undefined"!=typeof chrome&&chrome?.storage){let e=await chrome.storage.local.get(["screenshots","sessions"]),s=e.screenshots||[],t=e.sessions||[];R(t),D(null);let a=t.reduce((e,s)=>(e.find(e=>e.id===s.id)||e.push(s),e),[]);console.log("[Screenshots Page] Total sessions in storage:",t.length),console.log("[Screenshots Page] Unique sessions after dedup:",a.length),console.log("[Screenshots Page] Session IDs:",a.map(e=>e.id)),console.log("[Screenshots Page] Total screenshots:",s.length),console.log("[Screenshots Page] Screenshot sessionIds:",s.map(e=>e.sessionId)),g([...s].reverse()),f(a),a.length>0&&S(new Set([a[0].id]))}else D("Chrome storage API not available")}catch(e){console.error("Error loading screenshots:",e),D(e instanceof Error?e.message:"Unknown error")}N(!1)};(0,u.useEffect)(()=>{console.log("‚ö° [Screenshots Page] useEffect running - loading data"),B();let e=setInterval(B,3e3);return()=>clearInterval(e)},[]),(0,u.useEffect)(()=>{let e=setInterval(()=>{A(e=>{let s={...e};return O.forEach(({session:e,screenshots:t})=>{if(t.length>0){let a=s[e.id]||0;s[e.id]=(a+1)%t.length}}),s})},2e3);return()=>clearInterval(e)},[p,i]);let U=i.length;i.filter(e=>"suspicious_click"===e.reason).length;let L=i.filter(e=>null!==e.postRequest&&void 0!==e.postRequest).length,$=p.length,H=p.filter(e=>"active"===e.status).length,O=p.map(e=>({session:e,screenshots:i.filter(s=>s.sessionId===e.id)}));console.log("[Screenshots Page] Grouped screenshots:",O.map(e=>({sessionId:e.session.id,screenshotCount:e.screenshots.length,screenshotIds:e.screenshots.map(e=>e.id)}))),console.log("[Screenshots Page] Orphaned screenshots (no sessionId):",i.filter(e=>!e.sessionId).length);let z=async()=>{if(confirm("Are you sure you want to clear all sessions and screenshots?"))try{"undefined"!=typeof chrome&&chrome?.storage&&(await chrome.storage.local.set({screenshots:[],sessions:[]}),g([]),f([]),b(1))}catch(e){console.error("Error clearing screenshots and sessions:",e)}},_=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),V=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),F=e=>{if(e<60)return`${e}s`;let s=Math.floor(e/60);if(s<60)return`${s}m ${e%60}s`;let t=Math.floor(s/60);return`${t}h ${s%60}m`},J=e=>"suspicious_click"===e?{color:"bg-red-500/10 text-red-500 border-red-500/30",icon:(0,s.jsx)(c,{className:"h-3 w-3"}),label:"Suspicious Click"}:e.includes("dom_change")?{color:"bg-purple-500/10 text-purple-500 border-purple-500/30",icon:(0,s.jsx)(o,{className:"h-3 w-3"}),label:"DOM Change"}:e.includes("scroll")?{color:"bg-blue-500/10 text-blue-500 border-blue-500/30",icon:(0,s.jsx)(c,{className:"h-3 w-3"}),label:"Scroll"}:{color:"bg-gray-500/10 text-gray-500 border-gray-500/30",icon:(0,s.jsx)(d.default,{className:"h-3 w-3"}),label:"Other"},K=()=>{w(null)};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Screenshots"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Screenshots grouped by agent mode sessions (debugger attached ‚Üí detached), showing suspicious clicks and POST API calls"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{variant:C?"default":"outline",size:"sm",onClick:()=>M(!C),children:[(0,s.jsx)(m,{className:"mr-2 h-4 w-4"}),"Debug Panel"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{b(1),B()},children:[(0,s.jsx)(n.RefreshCwIcon,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,s.jsxs)(r.Button,{variant:"destructive",size:"sm",onClick:z,disabled:0===i.length&&0===p.length,children:[(0,s.jsx)(x.Trash2Icon,{className:"mr-2 h-4 w-4"}),"Clear All"]})]})]}),C&&(0,s.jsxs)(l.Card,{className:"bg-yellow-500/5 border-yellow-500/30",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(m,{className:"h-5 w-5 text-yellow-600"}),"Debug Panel - Session Storage Analysis v4.0"]}),(0,s.jsxs)(l.CardDescription,{children:["Real-time view of session storage data | Chrome API: ",window.chrome?.storage?"Available ‚úì":"Not Available"," | Loading: ",j?"Yes":"No"," | Load attempts: ",P]})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[I&&(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-600 text-sm mb-2",children:"‚ùå Load Error:"}),(0,s.jsx)("p",{className:"text-sm text-red-700",children:I})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-background p-3 rounded border",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:T.length}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Sessions in Storage (RAW)"})]}),(0,s.jsxs)("div",{className:"bg-background p-3 rounded border",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:p.length}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Unique Sessions (Deduplicated)"})]}),(0,s.jsxs)("div",{className:"bg-background p-3 rounded border",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:T.length-p.length}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Duplicate Sessions Found"})]}),(0,s.jsxs)("div",{className:"bg-background p-3 rounded border",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Screenshots"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"All Sessions in Storage (Raw Data):"}),(0,s.jsx)("div",{className:"bg-background rounded border overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-xs",children:[(0,s.jsx)("thead",{className:"bg-muted",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"#"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Session ID"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Tab ID"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Start Time"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Screenshots"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"Duplicate?"})]})}),(0,s.jsx)("tbody",{children:T.map((e,t)=>{let r=T.filter(s=>s.id===e.id).length>1,l=i.filter(s=>s.sessionId===e.id).length;return(0,s.jsxs)("tr",{className:r?"bg-red-500/10":"",children:[(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:t+1}),(0,s.jsx)("td",{className:"px-3 py-2 border-t font-mono",children:e.id}),(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:(0,s.jsx)(a.Badge,{className:"active"===e.status?"bg-orange-500 text-xs":"bg-green-500 text-xs",children:e.status})}),(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:e.tabId}),(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:_(e.startTime)}),(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:l}),(0,s.jsx)("td",{className:"px-3 py-2 border-t",children:r?(0,s.jsx)(a.Badge,{variant:"destructive",className:"text-xs",children:"YES ‚ö†Ô∏è"}):(0,s.jsx)(a.Badge,{variant:"outline",className:"text-xs",children:"No"})})]},`${e.id}-${t}`)})})]})})]}),(e=T.filter((e,s,t)=>t.filter(s=>s.id===e.id).length>1).map(e=>e.id).filter((e,s,t)=>t.indexOf(e)===s)).length>0?(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-600 text-sm mb-2",children:"‚ö†Ô∏è Duplicate Session IDs Detected:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(e=>(0,s.jsxs)(a.Badge,{variant:"destructive",children:[e," (appears ",T.filter(s=>s.id===e).length,"x)"]},e))})]}):(0,s.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded p-3",children:(0,s.jsx)("h4",{className:"font-semibold text-green-600 text-sm",children:"‚úÖ No duplicate session IDs found!"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Raw Session Data (JSON):"}),(0,s.jsx)("div",{className:"bg-background rounded border p-3 overflow-x-auto",children:(0,s.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:0===T.length?"No raw session data":JSON.stringify(T,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Screenshots by Session:"}),(0,s.jsx)("div",{className:"bg-background rounded border p-3",children:0===p.length?(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"No sessions found (after deduplication)"}):(0,s.jsx)("div",{className:"space-y-2",children:p.map(e=>{let t=i.filter(s=>s.sessionId===e.id);return(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"font-mono",children:["Session #",e.id]}),(0,s.jsxs)(a.Badge,{variant:"outline",className:"text-xs",children:[t.length," screenshot",1!==t.length?"s":""]})]},e.id)})})})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsx)(t.StatCard,{title:"Total Sessions",value:$,icon:(0,s.jsx)(d.default,{className:"h-4 w-4"}),description:"Agent mode sessions"}),(0,s.jsx)(t.StatCard,{title:"Active Sessions",value:H,variant:H>0?"error":"default",icon:(0,s.jsx)(c,{className:"h-4 w-4"}),description:"Currently running"}),(0,s.jsx)(t.StatCard,{title:"Total Screenshots",value:U,icon:(0,s.jsx)(d.default,{className:"h-4 w-4"}),description:"All captured"}),(0,s.jsx)(t.StatCard,{title:"With POST Requests",value:L,icon:(0,s.jsx)(o,{className:"h-4 w-4"}),description:"API calls detected"})]}),j?(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"py-12",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(n.RefreshCwIcon,{className:"mr-2 h-5 w-5 animate-spin"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading sessions..."})]})})}):0===p.length&&0===i.length?(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"py-12",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)(d.default,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),(0,s.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"No sessions yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sessions will appear here when agent mode (debugger) is attached"})]})})}):(0,s.jsx)("div",{className:"flex flex-col gap-4",children:O.map(({session:e,screenshots:t})=>{let r=t[E[e.id]||0],n=r?J(r.reason):null;return(0,s.jsxs)(l.Card,{className:"active"===e.status?"border-orange-500/50":"",children:[(0,s.jsx)(l.CardHeader,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var s;let t;return s=e.id,void((t=new Set(k)).has(s)?t.delete(s):t.add(s),S(t))},children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full mt-1 ${"active"===e.status?"bg-orange-500 animate-pulse":"bg-green-500"}`}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(l.CardTitle,{className:"text-lg mb-2",children:["Session #",e.id,"active"===e.status&&(0,s.jsx)(a.Badge,{className:"ml-2 bg-orange-500",children:"Active"})]}),(0,s.jsxs)(l.CardDescription,{className:"mb-3",children:[e.tabTitle||"Unknown Page"," ‚Ä¢ ",(e=>{if(e.duration)return F(e.duration);if("active"===e.status){let s=new Date(e.startTime);return F(Math.floor((new Date().getTime()-s.getTime())/1e3))+" (active)"}return"Unknown"})(e)," ‚Ä¢ ",t.length," screenshots"]}),r&&!k.has(e.id)&&(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-muted/30 rounded-lg border",children:[(0,s.jsx)("div",{className:"relative w-32 h-20 flex-shrink-0 bg-background rounded overflow-hidden",children:(0,s.jsx)("img",{src:r.dataUrl,alt:`Preview ${r.id}`,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[n&&(0,s.jsxs)(a.Badge,{variant:"outline",className:`text-xs gap-1 ${n.color}`,children:[n.icon,n.label]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["#",r.id]})]}),(0,s.jsx)("div",{className:"text-sm font-medium truncate",title:r.url,children:new URL(r.url).hostname}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[V(r.timestamp)," ",_(r.timestamp)]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(a.Badge,{variant:"outline",className:"text-xs",children:[V(e.startTime)," ",_(e.startTime)]}),(0,s.jsx)(h.ChevronDownIcon,{className:`h-5 w-5 transition-transform ${k.has(e.id)?"rotate-180":""}`})]})]})}),k.has(e.id)&&(0,s.jsx)(l.CardContent,{children:0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,s.jsx)(d.default,{className:"mb-2 h-8 w-8 text-muted-foreground/50"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No screenshots captured in this session"})]}):(0,s.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Screenshot"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Event"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"URL"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date/Time"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:t.map(e=>{let t=J(e.reason),r="suspicious_click"===e.reason;return(0,s.jsxs)("tr",{className:`hover:bg-muted/30 transition-colors cursor-pointer ${r?"bg-red-500/5":""}`,onClick:()=>{w(e)},children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("div",{className:"relative w-32 h-20 bg-background rounded overflow-hidden border",children:(0,s.jsx)("img",{src:e.dataUrl,alt:`Screenshot ${e.id}`,className:"w-full h-full object-cover"})})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(a.Badge,{variant:"outline",className:`text-xs gap-1 ${t.color}`,children:[t.icon,t.label]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["#",e.id]})]}),e.clickedElement&&(0,s.jsxs)("div",{className:"text-xs text-orange-600",children:["üñ±Ô∏è <",e.clickedElement.tag.toLowerCase(),">"]}),e.postRequest&&(0,s.jsxs)("div",{className:"text-xs text-blue-600",children:["üì° ",e.postRequest.method]})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"max-w-xs",children:[(0,s.jsx)("div",{className:"text-sm font-medium truncate",title:e.url,children:new URL(e.url).hostname}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground truncate",title:e.title,children:e.title})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"text-sm whitespace-nowrap",children:[(0,s.jsx)("div",{children:V(e.timestamp)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:_(e.timestamp)})]})})]},e.id)})})]})})})]},e.id)})}),y&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:K,children:(0,s.jsxs)("div",{className:"max-w-6xl w-full max-h-[90vh] overflow-auto bg-background rounded-lg shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Screenshot #",y.id]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:y.title})]}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:K,children:"Close"})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("img",{src:y.dataUrl,alt:`Screenshot ${y.id}`,className:"w-full h-auto rounded-md"}),(0,s.jsxs)("div",{className:"mt-4 space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"URL:"}),(0,s.jsx)("span",{className:"text-muted-foreground break-all",children:y.url})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Reason:"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:y.reason})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Time:"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[V(y.timestamp)," ",_(y.timestamp)]})]}),y.clickedElement&&(0,s.jsxs)("div",{className:"border-t pt-3 mt-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-orange-600 mb-2",children:"üñ±Ô∏è Clicked Element"}),(0,s.jsxs)("div",{className:"space-y-1 bg-orange-500/5 p-3 rounded border border-orange-500/20",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Tag:"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:["<",y.clickedElement.tag.toLowerCase(),">"]})]}),y.clickedElement.id&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"ID:"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:y.clickedElement.id})]}),y.clickedElement.className&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Class:"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:y.clickedElement.className})]}),y.clickedElement.text&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Text:"}),(0,s.jsx)("span",{className:"text-muted-foreground break-words",children:y.clickedElement.text})]}),y.clickCoordinates&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Coordinates:"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:["x: ",y.clickCoordinates.x,", y: ",y.clickCoordinates.y]})]})]})]}),y.postRequest&&(0,s.jsxs)("div",{className:"border-t pt-3 mt-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-600 mb-2",children:"üì° POST Request"}),(0,s.jsxs)("div",{className:"space-y-2 bg-blue-500/5 p-3 rounded border border-blue-500/20",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Method:"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:y.postRequest.method})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Hostname:"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:y.postRequest.hostname})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"URL:"}),(0,s.jsx)("span",{className:"text-muted-foreground break-all text-xs",children:y.postRequest.url})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Status:"}),(0,s.jsx)(a.Badge,{className:"blocked"===y.postRequest.status?"bg-red-500":"bg-green-500",children:y.postRequest.status.toUpperCase()})]}),y.postRequest.matched_fields.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Matched Fields:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:y.postRequest.matched_fields.map((e,t)=>(0,s.jsx)(a.Badge,{variant:"outline",className:"text-xs",children:e},t))}),(0,s.jsx)("div",{className:"mt-2 space-y-1 text-xs",children:Object.entries(y.postRequest.matched_values).map(([e,t])=>(0,s.jsxs)("div",{className:"bg-muted p-2 rounded",children:[(0,s.jsxs)("span",{className:"font-mono font-semibold",children:[e,":"]})," ",(0,s.jsxs)("span",{className:"text-muted-foreground",children:[t.substring(0,50),t.length>50?"...":""]})]},e))})]})]})]})]})]})]})})]})}e.s(["default",()=>g],14550)}]);