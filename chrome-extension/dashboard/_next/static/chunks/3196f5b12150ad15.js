(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9698,e=>{"use strict";var t=e.i(72469);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},15788,50140,57575,3867,97421,32028,94461,e=>{"use strict";var t=e.i(64192);let a=(0,t.default)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);e.s(["MousePointerIcon",()=>a],15788);let s=(0,t.default)("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);e.s(["MousePointerClickIcon",()=>s],50140);let l=(0,t.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["MenuIcon",()=>l],57575);let r=(0,t.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);e.s(["KeyboardIcon",()=>r],3867);let n=(0,t.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["EditIcon",()=>n],97421);let i=(0,t.default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDownIcon",()=>i],32028);let o=(0,t.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpenIcon",()=>o],94461)},65049,e=>{"use strict";var t=e.i(45976),a=e.i(83603),s=e.i(3736);function l(e){let l,r,n,i,o=(0,a.c)(8);return o[0]!==e?({className:l,...r}=e,o[0]=e,o[1]=l,o[2]=r):(l=o[1],r=o[2]),o[3]!==l?(n=(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",l),o[3]=l,o[4]=n):n=o[4],o[5]!==r||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card",className:n,...r}),o[5]=r,o[6]=n,o[7]=i):i=o[7],i}function r(e){let l,r,n,i,o=(0,a.c)(8);return o[0]!==e?({className:l,...r}=e,o[0]=e,o[1]=l,o[2]=r):(l=o[1],r=o[2]),o[3]!==l?(n=(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",l),o[3]=l,o[4]=n):n=o[4],o[5]!==r||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-header",className:n,...r}),o[5]=r,o[6]=n,o[7]=i):i=o[7],i}function n(e){let l,r,n,i,o=(0,a.c)(8);return o[0]!==e?({className:l,...r}=e,o[0]=e,o[1]=l,o[2]=r):(l=o[1],r=o[2]),o[3]!==l?(n=(0,s.cn)("leading-none font-semibold",l),o[3]=l,o[4]=n):n=o[4],o[5]!==r||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-title",className:n,...r}),o[5]=r,o[6]=n,o[7]=i):i=o[7],i}function i(e){let l,r,n,i,o=(0,a.c)(8);return o[0]!==e?({className:l,...r}=e,o[0]=e,o[1]=l,o[2]=r):(l=o[1],r=o[2]),o[3]!==l?(n=(0,s.cn)("text-muted-foreground text-sm",l),o[3]=l,o[4]=n):n=o[4],o[5]!==r||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-description",className:n,...r}),o[5]=r,o[6]=n,o[7]=i):i=o[7],i}function o(e){let l,r,n,i,o=(0,a.c)(8);return o[0]!==e?({className:l,...r}=e,o[0]=e,o[1]=l,o[2]=r):(l=o[1],r=o[2]),o[3]!==l?(n=(0,s.cn)("px-6",l),o[3]=l,o[4]=n):n=o[4],o[5]!==r||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-content",className:n,...r}),o[5]=r,o[6]=n,o[7]=i):i=o[7],i}e.s(["Card",()=>l,"CardContent",()=>o,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>n])},4461,115,e=>{"use strict";var t=e.i(45976),a=e.i(83603),s=e.i(30300),l=e.i(17008),r=e.i(3736);let n=(0,l.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i(e){let l,i,o,d,c,u,h=(0,a.c)(12);h[0]!==e?({className:l,variant:d,asChild:o,...i}=e,h[0]=e,h[1]=l,h[2]=i,h[3]=o,h[4]=d):(l=h[1],i=h[2],o=h[3],d=h[4]);let m=void 0!==o&&o?s.Slot.Slot:"span";return h[5]!==l||h[6]!==d?(c=(0,r.cn)(n({variant:d}),l),h[5]=l,h[6]=d,h[7]=c):c=h[7],h[8]!==m||h[9]!==i||h[10]!==c?(u=(0,t.jsx)(m,{"data-slot":"badge",className:c,...i}),h[8]=m,h[9]=i,h[10]=c,h[11]=u):u=h[11],u}function o(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("w-full caption-bottom text-sm",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:n,...l})}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function d(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("[&_tr]:border-b",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("thead",{"data-slot":"table-header",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function c(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("[&_tr:last-child]:border-0",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("tbody",{"data-slot":"table-body",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function u(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("tr",{"data-slot":"table-row",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function h(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("th",{"data-slot":"table-head",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function m(e){let s,l,n,i,o=(0,a.c)(8);return o[0]!==e?({className:s,...l}=e,o[0]=e,o[1]=s,o[2]=l):(s=o[1],l=o[2]),o[3]!==s?(n=(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),o[3]=s,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("td",{"data-slot":"table-cell",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}e.s(["Badge",()=>i],4461),e.s(["Table",()=>o,"TableBody",()=>c,"TableCell",()=>m,"TableHead",()=>h,"TableHeader",()=>d,"TableRow",()=>u],115)},69716,e=>{"use strict";let t=(0,e.i(64192).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCwIcon",()=>t],69716)},19213,e=>{"use strict";var t=e.i(45976),a=e.i(83603),s=e.i(75289),l=e.i(40300),r=e.i(3736);function n(e){let l,r,n=(0,a.c)(4);return n[0]!==e?({...l}=e,n[0]=e,n[1]=l):l=n[1],n[2]!==l?(r=(0,t.jsx)(s.Dialog.Root,{"data-slot":"dialog",...l}),n[2]=l,n[3]=r):r=n[3],r}function i(e){let l,r,n=(0,a.c)(4);return n[0]!==e?({...l}=e,n[0]=e,n[1]=l):l=n[1],n[2]!==l?(r=(0,t.jsx)(s.Dialog.Trigger,{"data-slot":"dialog-trigger",...l}),n[2]=l,n[3]=r):r=n[3],r}function o(e){let l,r,n=(0,a.c)(4);return n[0]!==e?({...l}=e,n[0]=e,n[1]=l):l=n[1],n[2]!==l?(r=(0,t.jsx)(s.Dialog.Portal,{"data-slot":"dialog-portal",...l}),n[2]=l,n[3]=r):r=n[3],r}function d(e){let l,n,i,o,d=(0,a.c)(8);return d[0]!==e?({className:l,...n}=e,d[0]=e,d[1]=l,d[2]=n):(l=d[1],n=d[2]),d[3]!==l?(i=(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",l),d[3]=l,d[4]=i):i=d[4],d[5]!==n||d[6]!==i?(o=(0,t.jsx)(s.Dialog.Overlay,{"data-slot":"dialog-overlay",className:i,...n}),d[5]=n,d[6]=i,d[7]=o):o=d[7],o}function c(e){let n,i,c,u,h,m,x,p,f=(0,a.c)(15);f[0]!==e?({className:i,children:n,showCloseButton:u,...c}=e,f[0]=e,f[1]=n,f[2]=i,f[3]=c,f[4]=u):(n=f[1],i=f[2],c=f[3],u=f[4]);let g=void 0===u||u;return f[5]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(d,{}),f[5]=h):h=f[5],f[6]!==i?(m=(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",i),f[6]=i,f[7]=m):m=f[7],f[8]!==g?(x=g&&(0,t.jsxs)(s.Dialog.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(l.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),f[8]=g,f[9]=x):x=f[9],f[10]!==n||f[11]!==c||f[12]!==m||f[13]!==x?(p=(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[h,(0,t.jsxs)(s.Dialog.Content,{"data-slot":"dialog-content",className:m,...c,children:[n,x]})]}),f[10]=n,f[11]=c,f[12]=m,f[13]=x,f[14]=p):p=f[14],p}e.s(["Dialog",()=>n,"DialogContent",()=>c,"DialogTrigger",()=>i])},21327,e=>{"use strict";let t=(0,e.i(64192).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLinkIcon",()=>t],21327)},665,e=>{"use strict";var t=e.i(45976),a=e.i(4461),s=e.i(99570),l=e.i(65049),r=e.i(19213),n=e.i(115),i=e.i(83603),o=e.i(72469),d=e.i(63087),c=e.i(77466),u=e.i(18659),h=e.i(60432),m=e.i(9698),x=e.i(33909);e.i(3577);var p=e.i(7379),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,p.createSlot)(`Primitive.${a}`),l=o.forwardRef((e,l)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:a,{...n,ref:l})});return l.displayName=`Primitive.${a}`,{...e,[a]:l}},{}),g="Switch",[b,v]=(0,u.createContextScope)(g),[j,y]=b(g),k=o.forwardRef((e,a)=>{let{__scopeSwitch:s,name:l,checked:r,defaultChecked:n,required:i,disabled:u,value:m="on",onCheckedChange:x,form:p,...b}=e,[v,y]=o.useState(null),k=(0,c.useComposedRefs)(a,e=>y(e)),w=o.useRef(!1),N=!v||p||!!v.closest("form"),[I,S]=(0,h.useControllableState)({prop:r,defaultProp:n??!1,onChange:x,caller:g});return(0,t.jsxs)(j,{scope:s,checked:I,disabled:u,children:[(0,t.jsx)(f.button,{type:"button",role:"switch","aria-checked":I,"aria-required":i,"data-state":T(I),"data-disabled":u?"":void 0,disabled:u,value:m,...b,ref:k,onClick:(0,d.composeEventHandlers)(e.onClick,e=>{S(e=>!e),N&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),N&&(0,t.jsx)(C,{control:v,bubbles:!w.current,name:l,value:m,checked:I,required:i,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});k.displayName=g;var w="SwitchThumb",N=o.forwardRef((e,a)=>{let{__scopeSwitch:s,...l}=e,r=y(w,s);return(0,t.jsx)(f.span,{"data-state":T(r.checked),"data-disabled":r.disabled?"":void 0,...l,ref:a})});N.displayName=w;var C=o.forwardRef(({__scopeSwitch:e,control:a,checked:s,bubbles:l=!0,...r},n)=>{let i=o.useRef(null),d=(0,c.useComposedRefs)(i,n),u=(0,m.usePrevious)(s),h=(0,x.useSize)(a);return o.useEffect(()=>{let e=i.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==s&&t){let a=new Event("click",{bubbles:l});t.call(e,s),e.dispatchEvent(a)}},[u,s,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:d,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function T(e){return e?"checked":"unchecked"}C.displayName="SwitchBubbleInput",e.s(["Root",()=>k,"Switch",()=>k,"SwitchThumb",()=>N,"Thumb",()=>N,"createSwitchScope",()=>v],82457);var I=e.i(82457),I=I,S=e.i(3736);function M(e){let a,s,l,r,n,o=(0,i.c)(9);return o[0]!==e?({className:a,...s}=e,o[0]=e,o[1]=a,o[2]=s):(a=o[1],s=o[2]),o[3]!==a?(l=(0,S.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),o[3]=a,o[4]=l):l=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(I.Thumb,{"data-slot":"switch-thumb",className:(0,S.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),o[5]=r):r=o[5],o[6]!==s||o[7]!==l?(n=(0,t.jsx)(I.Root,{"data-slot":"switch",className:l,...s,children:r}),o[6]=s,o[7]=l,o[8]=n):n=o[8],n}let D=(0,e.i(64192).default)("ShieldBan",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);var R=e.i(69716),$=e.i(15788),z=e.i(50140),B=e.i(57575),P=e.i(3867),_=e.i(97421),A=e.i(32028),E=e.i(94461),H=e.i(21327);function V(){let[e,i]=(0,o.useState)([]),[d,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(new Set),[m,x]=(0,o.useState)([]),[p,f]=(0,o.useState)({}),[g,b]=(0,o.useState)("all");(0,o.useEffect)(()=>{document.title="Action Block - ContextFort",v(),j()},[]);let v=async(e=!1)=>{e&&c(!0);try{if("undefined"!=typeof chrome&&chrome?.storage){let e=(await chrome.storage.local.get(["screenshots"])).screenshots||[];i(e)}}catch(e){console.error("Error loading screenshots:",e)}finally{e&&c(!1)}},j=async()=>{try{if("undefined"!=typeof chrome&&chrome?.storage){let e=(await chrome.storage.local.get(["blockedActions"])).blockedActions||[];x(e)}}catch(e){console.error("Error loading blocked actions:",e)}},y=e=>{let t=[e.actionType,e.url,e.title,e.elementTag||"",e.elementId||"",e.elementClass||"",e.elementText||"",e.elementType||"",e.elementName||"",e.inputValue||"",e.coordinates||""].join("|||"),a=0;for(let e=0;e<t.length;e++)a=(a<<5)-a+t.charCodeAt(e),a&=a;return`action_${Math.abs(a).toString(36)}`},k=e=>{let t=y(e);return m.some(e=>e.id===t&&e.blocked)},w=async(e,t)=>{let a=y(e);try{if("undefined"!=typeof chrome&&chrome?.storage){let s=[...m];if(t){let t=e.coordinates?e.coordinates.match(/\((\d+), (\d+)\)/):null,l={id:a,actionType:e.actionType,url:e.url,title:e.title,elementTag:e.elementTag,elementId:e.elementId,elementClass:e.elementClass,elementText:e.elementText,elementType:e.elementType,elementName:e.elementName,inputValue:e.inputValue,coordinatesX:t?parseInt(t[1],10):null,coordinatesY:t?parseInt(t[2],10):null,blocked:!0,createdAt:new Date().toISOString()};s.push(l)}else s=s.filter(e=>e.id!==a);await chrome.storage.local.set({blockedActions:s}),x(s)}}catch(e){console.error("Error toggling block action:",e)}},N=(e,t)=>{let a=t.currentTarget;f(t=>({...t,[e]:{width:a.naturalWidth,height:a.naturalHeight}}))},C=new Map,T=new Map;e.forEach(e=>{let t=e.eventDetails?.actionType||e.reason;if(t.endsWith("_result")||"scroll"===t||"page_read"===t)return;let a=e.eventDetails?.element,s=e.eventDetails?.coordinates,l=e.eventDetails?.inputValue,r=[t,e.url,e.title];a&&("click"===t||"dblclick"===t||"rightclick"===t)&&(r.push(a.tag||""),r.push(a.id||""),r.push(a.className||""),r.push(a.text||"")),a&&("input"===t||"change"===t)&&(r.push(a.tag||""),r.push(a.id||""),r.push(a.type||""),r.push(a.name||""),r.push(l||"")),s&&r.push(`${s.x},${s.y}`);let n=r.join("|||");C.has(n)||C.set(n,{actionType:t,url:e.url,title:e.title,elementTag:a?.tag,elementId:a?.id,elementClass:a?.className,elementText:a?.text,elementType:a?.type,elementName:a?.name,inputValue:l,coordinates:s?`(${s.x}, ${s.y})`:null,count:0,sessionIds:new Set,screenshots:[]});let i=C.get(n);i.count++,e.sessionId&&i.sessionIds.add(e.sessionId),i.screenshots.push(e),T.set(e.id,n)}),e.forEach(e=>{if(!(e.eventDetails?.actionType||e.reason).endsWith("_result"))return;let t=e.eventDetails?.actionId;if(!t)return;let a=T.get(t);if(!a)return;let s=C.get(a);s&&s.screenshots.push(e)});let I=Array.from(C.values()).sort((e,t)=>t.count-e.count),S=I.filter(e=>"all"===g||("blocked"===g?k(e):"unblocked"!==g||!k(e)));(0,o.useEffect)(()=>{S.length>0&&0===u.size&&h(new Set([V(S[0])]))},[S.length]);let V=e=>`${e.actionType}|||${e.url}|||${e.title}|||${e.elementTag||""}|||${e.elementId||""}`;return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Action Block"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review and block specific agent actions across sessions"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[(0,t.jsx)(R.RefreshCwIcon,{className:"mr-2 h-4 w-4"}),"Refresh"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Filter:"}),(0,t.jsxs)(s.Button,{variant:"all"===g?"default":"outline",size:"sm",onClick:()=>b("all"),children:["All (",I.length,")"]}),(0,t.jsxs)(s.Button,{variant:"blocked"===g?"default":"outline",size:"sm",onClick:()=>b("blocked"),children:["Blocked (",I.filter(e=>k(e)).length,")"]}),(0,t.jsxs)(s.Button,{variant:"unblocked"===g?"default":"outline",size:"sm",onClick:()=>b("unblocked"),children:["Unblocked (",I.filter(e=>!k(e)).length,")"]})]}),d?(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)(R.RefreshCwIcon,{className:"mr-2 h-5 w-5 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading actions..."})]})})}):0===I.length?(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(D,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),(0,t.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"No actions recorded yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Agent actions will appear here once captured"})]})})}):0===S.length?(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(D,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),(0,t.jsxs)("h3",{className:"mb-2 text-lg font-medium",children:["No ",g," actions"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Try changing the filter to see more actions"})]})})}):(0,t.jsx)("div",{className:"rounded-md border border-border",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"hover:bg-transparent border-b border-border",children:[(0,t.jsx)(n.TableHead,{className:"w-[15%]",children:"Action Type"}),(0,t.jsx)(n.TableHead,{className:"w-[25%]",children:"Page"}),(0,t.jsx)(n.TableHead,{className:"w-[35%]",children:"Action Details"}),(0,t.jsx)(n.TableHead,{className:"w-[8%] text-center",children:"Count"}),(0,t.jsx)(n.TableHead,{className:"w-[8%] text-center",children:"Sessions"}),(0,t.jsx)(n.TableHead,{className:"w-[9%] text-center",children:"Block"})]})}),(0,t.jsx)(n.TableBody,{children:S.map(l=>{var i,d;let c,m,x=V(l),f=u.has(x),g=l.screenshots.find(e=>!(e.eventDetails?.actionType||e.reason).endsWith("_result")),b=g?e.find(e=>e.eventDetails?.actionId===g.id):l.screenshots.find(e=>(e.eventDetails?.actionType||e.reason).endsWith("_result"));return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsxs)(n.TableRow,{className:`border-b border-border cursor-pointer hover:bg-muted/50 transition-colors ${k(l)?"bg-red-500/5":""}`,onClick:()=>{let e;(e=new Set(u)).has(x)?e.delete(x):e.add(x),h(e)},children:[(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:k(l)?"text-red-500":"text-muted-foreground",children:"click"===(i=l.actionType)?(0,t.jsx)($.MousePointerIcon,{className:"h-4 w-4"}):"dblclick"===i?(0,t.jsx)(z.MousePointerClickIcon,{className:"h-4 w-4"}):"rightclick"===i?(0,t.jsx)(B.MenuIcon,{className:"h-4 w-4"}):"input"===i?(0,t.jsx)(P.KeyboardIcon,{className:"h-4 w-4"}):"change"===i?(0,t.jsx)(_.EditIcon,{className:"h-4 w-4"}):"scroll"===i?(0,t.jsx)(A.ArrowUpDownIcon,{className:"h-4 w-4"}):"page_read"===i?(0,t.jsx)(E.BookOpenIcon,{className:"h-4 w-4"}):(0,t.jsx)(D,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"text-sm text-foreground",children:"click"===(d=l.actionType)?"Click":"dblclick"===d?"Double Click":"rightclick"===d?"Right Click":"input"===d?"Text Input":"change"===d?"Value Changed":"scroll"===d?"Scroll":"page_read"===d?"Page Read":d})]})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)("div",{className:"max-w-[250px]",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:l.title}),(0,t.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:l.url})]})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)("div",{className:"text-sm text-foreground space-y-1",children:[l.elementTag&&(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Element: "}),l.elementTag,l.elementId&&` #${l.elementId}`,l.elementClass&&` .${l.elementClass.split(" ")[0]}`,l.elementText&&` "${l.elementText.substring(0,30)}..."`]}),l.inputValue&&(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Input: "}),'"',l.inputValue,'"']}),l.coordinates&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Position: ",l.coordinates]}),b&&(b.url!==l.url||b.title!==l.title)&&(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-border",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Result Page:"}),(0,t.jsx)("div",{className:"truncate text-xs font-medium text-foreground",children:b.title}),(0,t.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:b.url})]})]})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:(0,t.jsx)(a.Badge,{variant:"outline",className:"bg-muted text-foreground border-border",children:l.count})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:(0,t.jsx)(a.Badge,{variant:"outline",className:"bg-muted text-foreground border-border",children:l.sessionIds.size})}),(0,t.jsx)(n.TableCell,{className:"text-center",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,t.jsx)(M,{checked:k(l),onCheckedChange:e=>w(l,e)}),(0,t.jsx)(a.Badge,{variant:k(l)?"destructive":"outline",className:"text-xs",children:k(l)?"BLOCKED":"ACTIVE"})]})})]}),f&&(0,t.jsx)(n.TableRow,{className:"bg-muted/30 hover:bg-muted/30",children:(0,t.jsx)(n.TableCell,{colSpan:6,children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-3",children:["Screenshots (",l.screenshots.length,")"]}),(0,t.jsx)("div",{className:"space-y-4",children:(c=[],m=new Set,l.screenshots.forEach(t=>{if(m.has(t.id))return;let a=t.eventDetails?.actionType||t.reason;if(a.endsWith("_result"))return;let s=e.find(e=>e.eventDetails?.actionId===t.id);if(!s){let l=e.findIndex(e=>e.id===t.id);if(l>=0&&l<e.length-1){let t=e[l+1];(t.eventDetails?.actionType||t.reason)===`${a}_result`&&(s=t)}}c.push({action:t,result:s}),m.add(t.id),s&&m.add(s.id)}),c.map(({action:a,result:l},n)=>{let i=a.eventDetails?.actionType||a.reason,o=(()=>{if("click"===i&&!a.dataUrl){let t=e.findIndex(e=>e.id===a.id);if(t>0){for(let a=t-1;a>=0;a--)if(e[a].dataUrl)return e[a].dataUrl}}return a.dataUrl})(),d=a.eventDetails?.coordinates;return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(r.Dialog,{children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"w-[400px] bg-card rounded-lg border border-border overflow-hidden flex flex-col cursor-pointer hover:border-muted-foreground transition-colors",children:[(0,t.jsxs)("div",{className:"relative w-full h-[180px] bg-muted",children:[o&&(0,t.jsx)("img",{src:o,alt:`Action ${a.id}`,className:"w-full h-full object-cover",onLoad:e=>N(a.id,e)}),d&&p[a.id]&&!i.includes("_result")&&(0,t.jsx)("div",{className:"absolute border-2 border-red-500 bg-red-500/20",style:{left:`${d.x/p[a.id].width*100}%`,top:`${d.y/p[a.id].height*100}%`,width:"20px",height:"20px",transform:"translate(-50%, -50%)"}}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"Action"})]}),(0,t.jsxs)("div",{className:"p-2 flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(a.timestamp).toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-foreground mb-2",children:["Session: ",a.sessionId||"N/A"]}),a.sessionId&&(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"mt-auto h-7 text-xs",onClick:e=>{e.stopPropagation(),window.location.href=`/dashboard/visibility?session=${a.sessionId}`},children:[(0,t.jsx)(H.ExternalLinkIcon,{className:"mr-1 h-3 w-3"}),"View Session"]})]})]})}),(0,t.jsx)(r.DialogContent,{className:"max-w-[90vw] max-h-[90vh] p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:o,alt:`Action ${a.id}`,className:"w-full h-full object-contain",onLoad:e=>N(a.id,e)}),d&&p[a.id]&&!i.includes("_result")&&(0,t.jsx)("div",{className:"absolute border-4 border-red-500 bg-red-500/30",style:{left:`${d.x/p[a.id].width*100}%`,top:`${d.y/p[a.id].height*100}%`,width:"40px",height:"40px",transform:"translate(-50%, -50%)"}})]})})]}),l&&(0,t.jsx)("div",{className:"text-2xl text-muted-foreground",children:"â†’"}),l&&(0,t.jsxs)(r.Dialog,{children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"w-[400px] bg-card rounded-lg border border-border overflow-hidden flex flex-col cursor-pointer hover:border-muted-foreground transition-colors",children:[(0,t.jsxs)("div",{className:"relative w-full h-[180px] bg-muted",children:[l.dataUrl&&(0,t.jsx)("img",{src:l.dataUrl,alt:`Result ${l.id}`,className:"w-full h-full object-cover",onLoad:e=>N(l.id,e)}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"Result"})]}),(0,t.jsxs)("div",{className:"p-2 flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(l.timestamp).toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-foreground mb-2",children:["Session: ",l.sessionId||"N/A"]}),l.sessionId&&(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"mt-auto h-7 text-xs",onClick:e=>{e.stopPropagation(),window.location.href=`/dashboard/visibility?session=${l.sessionId}`},children:[(0,t.jsx)(H.ExternalLinkIcon,{className:"mr-1 h-3 w-3"}),"View Session"]})]})]})}),(0,t.jsx)(r.DialogContent,{className:"max-w-[90vw] max-h-[90vh] p-4",children:(0,t.jsx)("div",{className:"relative",children:l.dataUrl&&(0,t.jsx)("img",{src:l.dataUrl,alt:`Result ${l.id}`,className:"w-full h-full object-contain",onLoad:e=>N(l.id,e)})})})]})]},a.id)}))})]})})})]},x)})})]})})]})}e.s(["default",()=>V],665)}]);