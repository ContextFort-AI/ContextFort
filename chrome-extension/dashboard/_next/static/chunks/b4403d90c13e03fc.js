(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65049,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(3736);function r(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function l(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-header",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function n(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("leading-none font-semibold",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-title",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function i(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("text-muted-foreground text-sm",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-description",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function o(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-action",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function c(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("px-6",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-content",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function d(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"card-footer",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}e.s(["Card",()=>r,"CardAction",()=>o,"CardContent",()=>c,"CardDescription",()=>i,"CardFooter",()=>d,"CardHeader",()=>l,"CardTitle",()=>n])},4461,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(30300),r=e.i(17008),l=e.i(3736);let n=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i(e){let r,i,o,c,d,u,h=(0,s.c)(12);h[0]!==e?({className:r,variant:c,asChild:o,...i}=e,h[0]=e,h[1]=r,h[2]=i,h[3]=o,h[4]=c):(r=h[1],i=h[2],o=h[3],c=h[4]);let x=void 0!==o&&o?a.Slot.Slot:"span";return h[5]!==r||h[6]!==c?(d=(0,l.cn)(n({variant:c}),r),h[5]=r,h[6]=c,h[7]=d):d=h[7],h[8]!==x||h[9]!==i||h[10]!==d?(u=(0,t.jsx)(x,{"data-slot":"badge",className:d,...i}),h[8]=x,h[9]=i,h[10]=d,h[11]=u):u=h[11],u}e.s(["Badge",()=>i])},115,e=>{"use strict";var t=e.i(45976),s=e.i(83603),a=e.i(3736);function r(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("w-full caption-bottom text-sm",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:n,...l})}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function l(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("[&_tr]:border-b",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("thead",{"data-slot":"table-header",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function n(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("[&_tr:last-child]:border-0",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("tbody",{"data-slot":"table-body",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function i(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("tr",{"data-slot":"table-row",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function o(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("th",{"data-slot":"table-head",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}function c(e){let r,l,n,i,o=(0,s.c)(8);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(n=(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),o[3]=r,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,t.jsx)("td",{"data-slot":"table-cell",className:n,...l}),o[5]=l,o[6]=n,o[7]=i):i=o[7],i}e.s(["Table",()=>r,"TableBody",()=>n,"TableCell",()=>c,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>i])},13090,e=>{"use strict";let t=(0,e.i(64192).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},69716,e=>{"use strict";var t=e.i(13090);e.s(["RefreshCwIcon",()=>t.default])},74596,e=>{"use strict";let t=(0,e.i(64192).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDownIcon",()=>t],74596)},50140,e=>{"use strict";let t=(0,e.i(64192).default)("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);e.s(["MousePointerClickIcon",()=>t],50140)},9569,e=>{"use strict";var t=e.i(45976),s=e.i(99570),a=e.i(65049),r=e.i(69716),l=e.i(54856),l=l,n=e.i(72469),i=e.i(4461),o=e.i(74596),c=e.i(31834),l=l,d=e.i(64192);let u=(0,d.default)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);var h=e.i(50140);let x=(0,d.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),m=(0,d.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),f=(0,d.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),g=(0,d.default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),p=(0,d.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),v=(0,d.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),b=[{id:"preview",accessorKey:"currentScreenshot",header:"Preview",cell:({row:e})=>{let s=e.original.currentScreenshot;return s&&s.dataUrl?(0,t.jsx)("div",{className:"relative w-[180px] h-[100px] bg-muted rounded overflow-hidden border border-border",children:(0,t.jsx)("img",{src:s.dataUrl,alt:"Preview",className:"w-full h-full object-cover"})}):(0,t.jsx)("div",{className:"relative w-[180px] h-[100px] bg-muted rounded overflow-hidden border border-border flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"No preview"})})}},{id:"event",accessorKey:"currentScreenshot.reason",header:"Event",cell:({row:e})=>{let s=e.original.currentScreenshot;if(!s)return null;let a=s.eventDetails?.actionType||s.reason;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:(e=>{if("click"===e)return(0,t.jsx)(u,{className:"h-4 w-4"});if("dblclick"===e)return(0,t.jsx)(h.MousePointerClickIcon,{className:"h-4 w-4"});if("rightclick"===e)return(0,t.jsx)(x,{className:"h-4 w-4"});if("input"===e)return(0,t.jsx)(m,{className:"h-4 w-4"});if("change"===e)return(0,t.jsx)(f,{className:"h-4 w-4"});else if("scroll"===e)return(0,t.jsx)(g,{className:"h-4 w-4"});else if("page_read"===e)return(0,t.jsx)(p,{className:"h-4 w-4"});else if("agent_event"===e)return(0,t.jsx)(v,{className:"h-4 w-4"});else if("suspicious_click"===e)return(0,t.jsx)(h.MousePointerClickIcon,{className:"h-4 w-4"});else if(e.includes("dom_change"))return(0,t.jsx)(v,{className:"h-4 w-4"});return(0,t.jsx)(l.default,{className:"h-4 w-4"})})(a)}),(0,t.jsx)("span",{className:"text-sm text-foreground",children:(e=>{let t=e.eventDetails?.actionType||e.reason;if("click"===t)return"Click";if("dblclick"===t)return"Double Click";if("rightclick"===t)return"Right Click";if("input"===t)return"Text Input";if("change"===t)return"Value Changed";else if("scroll"===t)return"Scroll";else if("page_read"===t)return"Page Read";else if("agent_event"===t)return"Agent Action";else if("suspicious_click"===t)return"Suspicious Click";else if(t.includes("dom_change"))return"DOM Change";return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})(s)})]})}},{id:"url",accessorKey:"session.tabUrl",header:"URL",cell:({row:e})=>{let s=e.original.session.tabTitle,a=e.original.session.tabUrl;return(0,t.jsxs)("div",{className:"max-w-[300px]",children:[(0,t.jsx)("div",{className:"truncate text-sm text-foreground font-medium",children:s}),(0,t.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:a})]})}},{id:"time",accessorKey:"session.startTime",header:"Time",cell:({row:e})=>{let s=e.original.session.startTime;return(0,t.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,t.jsx)("span",{className:"text-foreground",children:new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})})]})}},{id:"captures",accessorKey:"screenshots.length",header:()=>(0,t.jsx)("div",{className:"text-right",children:"Captures"}),cell:({row:e})=>{let s=e.original.screenshots.length;return(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)(i.Badge,{variant:"outline",className:"bg-muted text-foreground border-border",children:s})})}},{id:"actions",cell:({row:e})=>{let a=e.original.isExpanded;return(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a?(0,t.jsx)(o.ChevronDownIcon,{className:"h-4 w-4 text-muted-foreground"}):(0,t.jsx)(c.ChevronRightIcon,{className:"h-4 w-4 text-muted-foreground"})})}}];var j=e.i(53061),w=e.i(69805),N=e.i(115),y=e.i(83603),k=e.i(75289),C=e.i(40300),M=e.i(3736);function T(e){let s,a,r=(0,y.c)(4);return r[0]!==e?({...s}=e,r[0]=e,r[1]=s):s=r[1],r[2]!==s?(a=(0,t.jsx)(k.Dialog.Root,{"data-slot":"dialog",...s}),r[2]=s,r[3]=a):a=r[3],a}function S(e){let s,a,r=(0,y.c)(4);return r[0]!==e?({...s}=e,r[0]=e,r[1]=s):s=r[1],r[2]!==s?(a=(0,t.jsx)(k.Dialog.Trigger,{"data-slot":"dialog-trigger",...s}),r[2]=s,r[3]=a):a=r[3],a}function D(e){let s,a,r=(0,y.c)(4);return r[0]!==e?({...s}=e,r[0]=e,r[1]=s):s=r[1],r[2]!==s?(a=(0,t.jsx)(k.Dialog.Portal,{"data-slot":"dialog-portal",...s}),r[2]=s,r[3]=a):a=r[3],a}function R(e){let s,a,r,l,n=(0,y.c)(8);return n[0]!==e?({className:s,...a}=e,n[0]=e,n[1]=s,n[2]=a):(s=n[1],a=n[2]),n[3]!==s?(r=(0,M.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),n[3]=s,n[4]=r):r=n[4],n[5]!==a||n[6]!==r?(l=(0,t.jsx)(k.Dialog.Overlay,{"data-slot":"dialog-overlay",className:r,...a}),n[5]=a,n[6]=r,n[7]=l):l=n[7],l}function _(e){let s,a,r,l,n,i,o,c,d=(0,y.c)(15);d[0]!==e?({className:a,children:s,showCloseButton:l,...r}=e,d[0]=e,d[1]=s,d[2]=a,d[3]=r,d[4]=l):(s=d[1],a=d[2],r=d[3],l=d[4]);let u=void 0===l||l;return d[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(R,{}),d[5]=n):n=d[5],d[6]!==a?(i=(0,M.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",a),d[6]=a,d[7]=i):i=d[7],d[8]!==u?(o=u&&(0,t.jsxs)(k.Dialog.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(C.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),d[8]=u,d[9]=o):o=d[9],d[10]!==s||d[11]!==r||d[12]!==i||d[13]!==o?(c=(0,t.jsxs)(D,{"data-slot":"dialog-portal",children:[n,(0,t.jsxs)(k.Dialog.Content,{"data-slot":"dialog-content",className:i,...r,children:[s,o]})]}),d[10]=s,d[11]=r,d[12]=i,d[13]=o,d[14]=c):c=d[14],c}var l=l;let I=e=>{if(e<60)return`${e}s`;let t=Math.floor(e/60);if(t<60)return`${t}m ${e%60}s`;let s=Math.floor(t/60);return`${s}h ${t%60}m ${e%60}s`};function z({columns:e,data:s,onRowClick:a}){let r=(0,j.useReactTable)({data:s,columns:e,getCoreRowModel:(0,w.getCoreRowModel)()});return(0,t.jsx)("div",{className:"rounded-md border border-border",children:(0,t.jsxs)(N.Table,{children:[(0,t.jsx)(N.TableHeader,{children:r.getHeaderGroups().map(e=>(0,t.jsx)(N.TableRow,{className:"hover:bg-transparent border-b border-border",children:e.headers.map(e=>(0,t.jsx)(N.TableHead,{children:e.isPlaceholder?null:(0,j.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(N.TableBody,{children:r.getRowModel().rows?.length?r.getRowModel().rows.map(s=>{let r=s.original,o=r.isExpanded;return(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)(N.TableRow,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer hover:bg-muted/50 transition-colors border-b border-border",onClick:()=>a(r.session.id),children:s.getVisibleCells().map(e=>(0,t.jsx)(N.TableCell,{children:(0,j.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))}),o&&(0,t.jsx)(N.TableRow,{className:"bg-muted/30 hover:bg-muted/30",children:(0,t.jsx)(N.TableCell,{colSpan:e.length,className:"p-0",children:(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Session ID: "}),(0,t.jsx)("span",{className:"text-foreground",children:r.session.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Duration: "}),(0,t.jsx)("span",{className:"text-foreground",children:(e=>{if(e.duration)return I(e.duration);if("active"===e.status){let t=new Date(e.startTime);return I(Math.floor((new Date().getTime()-t.getTime())/1e3))}return"Unknown"})(r.session)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status: "}),(0,t.jsx)(i.Badge,{variant:"outline",className:"ml-2 bg-background border-border",children:r.session.status})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:r.screenshots.map(e=>{let s=e.eventDetails?.actionType||e.reason;return(0,t.jsxs)(T,{children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)("div",{className:"bg-card rounded-lg border border-border overflow-hidden hover:border-muted-foreground transition-colors cursor-pointer",children:[(0,t.jsx)("div",{className:"relative w-full h-[120px] bg-muted",children:(0,t.jsx)("img",{src:e.dataUrl,alt:`Screenshot ${e.id}`,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"p-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ",new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(e=>{if("click"===e)return(0,t.jsx)(u,{className:"h-4 w-4"});if("dblclick"===e)return(0,t.jsx)(h.MousePointerClickIcon,{className:"h-4 w-4"});if("rightclick"===e)return(0,t.jsx)(x,{className:"h-4 w-4"});if("input"===e)return(0,t.jsx)(m,{className:"h-4 w-4"});if("change"===e)return(0,t.jsx)(f,{className:"h-4 w-4"});else if("scroll"===e)return(0,t.jsx)(g,{className:"h-4 w-4"});else if("page_read"===e)return(0,t.jsx)(p,{className:"h-4 w-4"});else if("agent_event"===e)return(0,t.jsx)(v,{className:"h-4 w-4"});else if("suspicious_click"===e)return(0,t.jsx)(h.MousePointerClickIcon,{className:"h-4 w-4"});else if(e.includes("dom_change"))return(0,t.jsx)(v,{className:"h-4 w-4"});return(0,t.jsx)(l.default,{className:"h-4 w-4"})})(s),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(e=>{let t=e.eventDetails?.actionType||e.reason;if("click"===t)return"Click";if("dblclick"===t)return"Double Click";if("rightclick"===t)return"Right Click";if("input"===t)return"Text Input";if("change"===t)return"Value Changed";else if("scroll"===t)return"Scroll";else if("page_read"===t)return"Page Read";else if("agent_event"===t)return"Agent Action";else if("suspicious_click"===t)return"Suspicious Click";else if(t.includes("dom_change"))return"DOM Change";return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})(e)})]})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-foreground truncate",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.url})]})]})]})}),(0,t.jsx)(_,{className:"max-w-[90vw] max-h-[90vh] p-0",children:(0,t.jsx)("img",{src:e.dataUrl,alt:`Screenshot ${e.id}`,className:"w-full h-full object-contain"})})]},e.id)})})]})})})]},s.id)}):(0,t.jsx)(N.TableRow,{children:(0,t.jsx)(N.TableCell,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})})}function U(){let[e,i]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,x]=(0,n.useState)(new Set),[m,f]=(0,n.useState)({}),g=(0,n.useRef)(!1);(0,n.useEffect)(()=>{document.title="Visibility - ContextFort"},[]);let p=async()=>{u(!0);try{if("undefined"!=typeof chrome&&chrome?.storage){let e=await chrome.storage.local.get(["screenshots","sessions"]),t=e.screenshots||[],s=(e.sessions||[]).reduce((e,t)=>(e.find(e=>e.id===t.id)||e.push(t),e),[]);i(t),c(s),s.length>0&&!g.current&&(x(new Set([s[0].id])),g.current=!0)}}catch(e){console.error("Error loading screenshots:",e)}u(!1)};(0,n.useEffect)(()=>{p();let e=setInterval(p,3e3);return()=>clearInterval(e)},[]);let v=(0,n.useMemo)(()=>o.map(t=>({session:t,screenshots:e.filter(e=>e.sessionId===t.id)})).filter(e=>e.screenshots.length>0),[o,e]);(0,n.useEffect)(()=>{let e=setInterval(()=>{f(e=>{let t={...e};return v.forEach(({session:e,screenshots:s})=>{if(s.length>0){let a=t[e.id]||0;t[e.id]=(a+1)%s.length}}),t})},2e3);return()=>clearInterval(e)},[v]);let j=(0,n.useMemo)(()=>v.map(({session:e,screenshots:t})=>{let s=t[m[e.id]||0]||null;return{session:e,screenshots:t,currentScreenshot:s,isExpanded:h.has(e.id)}}),[v,m,h]);return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Visibility"})}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>{p()},children:[(0,t.jsx)(r.RefreshCwIcon,{className:"mr-2 h-4 w-4"}),"Refresh"]})})]}),d?(0,t.jsx)(a.Card,{children:(0,t.jsx)(a.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)(r.RefreshCwIcon,{className:"mr-2 h-5 w-5 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading sessions..."})]})})}):0===j.length?(0,t.jsx)(a.Card,{children:(0,t.jsx)(a.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.default,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No sessions found"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Sessions will appear here when screenshots are captured"})]})})}):(0,t.jsx)(z,{columns:b,data:j,onRowClick:e=>{let t=new Set(h);t.has(e)?t.delete(e):t.add(e),x(t)}})]})}e.s(["default",()=>U],9569)}]);